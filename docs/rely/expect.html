<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Expect · Reason Native</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta name="description" content="&lt;p&gt;When you&#x27;re writing tests, you often need to check that values meet certain conditions. Expect gives you access to a number of &amp;quot;matchers&amp;quot; that let you validate different things.&lt;/p&gt;
"/><meta name="docsearch:language" content="en"/><meta property="og:title" content="Expect · Reason Native"/><meta property="og:type" content="website"/><meta property="og:url" content="https://reason-native.com/index.html"/><meta property="og:description" content="&lt;p&gt;When you&#x27;re writing tests, you often need to check that values meet certain conditions. Expect gives you access to a number of &amp;quot;matchers&amp;quot; that let you validate different things.&lt;/p&gt;
"/><meta property="og:image" content="https://reason-native.com/img/docusaurus.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="https://reason-native.com/img/docusaurus.png"/><link rel="shortcut icon" href="/img/logo.png"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/atom-one-light.min.css"/><script type="text/javascript" src="/js/ansi-to-html.js"></script><script type="text/javascript" src="https://buttons.github.io/buttons.js"></script><script type="text/javascript" src="/js/ansi.js"></script><link rel="stylesheet" href="/css/main.css"/><script src="/js/codetabs.js"></script></head><body class="sideNavVisible separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/"><img class="logo" src="/img/logo-inverted.svg" alt="Reason Native"/></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/docs/introduction" target="_self">Docs</a></li><li class=""><a href="/help" target="_self">Help</a></li><li class=""><a href="https://github.com/facebookexperimental/reason-native" target="_self">GitHub</a></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Rely</span></h2><div class="tocToggler" id="tocToggler"><i class="icon-toc"></i></div></div><div class="navGroups"><div class="navGroup"><h3 class="navGroupCategoryTitle">Overview</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/introduction">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/native-basics">Native Basics</a></li><li class="navListItem"><a class="navItem" href="/docs/getting-started">Getting Started</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Rely</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/rely/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/rely/quickstart">Quickstart</a></li><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">Guides</h4><ul><li class="navListItem"><a class="navItem" href="/docs/rely/setup-teardown">Setup and Teardown</a></li><li class="navListItem"><a class="navItem" href="/docs/rely/mock-functions">Mock Functions</a></li></ul></div><div class="navGroup subNavGroup"><h4 class="navGroupSubcategoryTitle">API Reference</h4><ul><li class="navListItem"><a class="navItem" href="/docs/rely/api">Basic API</a></li><li class="navListItem navListItemActive"><a class="navItem" href="/docs/rely/expect">Expect</a></li></ul></div><li class="navListItem"><a class="navItem" href="/docs/rely/advanced">Advanced</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Console</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/console/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/console/quickstart">Quickstart</a></li><li class="navListItem"><a class="navItem" href="/docs/console/api">API</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Pastel</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/pastel/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/pastel/quickstart">Quickstart</a></li><li class="navListItem"><a class="navItem" href="/docs/pastel/api">API</a></li><li class="navListItem"><a class="navItem" href="/docs/pastel/console">Console</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">Refmterr</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/refmterr/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/refmterr/quickstart">Quickstart</a></li></ul></div><div class="navGroup"><h3 class="navGroupCategoryTitle">File Context Printer</h3><ul class=""><li class="navListItem"><a class="navItem" href="/docs/file-context-printer/">Introduction</a></li><li class="navListItem"><a class="navItem" href="/docs/file-context-printer/quickstart">Quickstart</a></li><li class="navListItem"><a class="navItem" href="/docs/file-context-printer/api">API</a></li></ul></div></div></section></div><script>
            var coll = document.getElementsByClassName('collapsible');
            var checkActiveCategory = true;
            for (var i = 0; i < coll.length; i++) {
              var links = coll[i].nextElementSibling.getElementsByTagName('*');
              if (checkActiveCategory){
                for (var j = 0; j < links.length; j++) {
                  if (links[j].classList.contains('navListItemActive')){
                    coll[i].nextElementSibling.classList.toggle('hide');
                    coll[i].childNodes[1].classList.toggle('rotate');
                    checkActiveCategory = false;
                    break;
                  }
                }
              }

              coll[i].addEventListener('click', function() {
                var arrow = this.childNodes[1];
                arrow.classList.toggle('rotate');
                var content = this.nextElementSibling;
                content.classList.toggle('hide');
              });
            }

            document.addEventListener('DOMContentLoaded', function() {
              createToggler('#navToggler', '#docsNav', 'docsSliderActive');
              createToggler('#tocToggler', 'body', 'tocActive');

              const headings = document.querySelector('.toc-headings');
              headings && headings.addEventListener('click', function(event) {
                if (event.target.tagName === 'A') {
                  document.body.classList.remove('tocActive');
                }
              }, false);

              function createToggler(togglerSelector, targetSelector, className) {
                var toggler = document.querySelector(togglerSelector);
                var target = document.querySelector(targetSelector);

                if (!toggler) {
                  return;
                }

                toggler.onclick = function(event) {
                  event.preventDefault();

                  target.classList.toggle(className);
                };
              }
            });
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><h1 class="postHeaderTitle">Expect</h1></header><article><div><span><p>When you're writing tests, you often need to check that values meet certain conditions. Expect gives you access to a number of &quot;matchers&quot; that let you validate different things.</p>
<p>Virtually all matchers below are negatable via prepending <code>.not</code> after the type (e.g. <code>expect.string(actual).not.toBeEmpty()</code>, <code>expect.int(actual).not.toBe(42)</code>). Matchers that are not negatable will be explicitly called out in the documentation below.</p>
<ul>
<li><a href="#expectarrayarray-a-tobeempty"><code>expect.array(array('a)).toBeEmpty()</code></a></li>
<li><a href="#expectarrayarray-a-tocontain-a"><code>expect.array(array('a)).toContain('a)</code></a></li>
<li><a href="#expectarrayarray-a-tocontainequal-equals-a-a-bool-a"><code>expect.array(array('a)).toContainEqual(~equals:('a, 'a) =&gt; bool=?, 'a)</code></a></li>
<li><a href="#expectarrayarray-a-toequal-equals-a-a-bool-array-a"><code>expect.array(array('a)).toEqual(~equals:('a, 'a) =&gt; bool, array('a))</code></a></li>
<li><a href="#expectassertionsint"><code>expect.assertions(int)</code></a></li>
<li><a href="#expecthasassertions"><code>expect.hasAssertions()</code></a></li>
<li><a href="#expectboolbool-tobebool"><code>expect.bool(bool).toBe(bool)</code></a></li>
<li><a href="#expectboolbool-tobetrue"><code>expect.bool(bool).toBeTrue()</code></a></li>
<li><a href="#expectboolbool-tobefalse"><code>expect.bool(bool).toBeFalse()</code></a></li>
<li><a href="#expectequal-equals-a-a-bool-a-a"><code>expect.equal(~equals: ('a, 'a) =&gt; bool=?, 'a, 'a)</code></a></li>
<li><a href="#expectext-1"><code>expect.ext</code></a></li>
<li><a href="#expectfilestring-tobeempty"><code>expect.file(string).toBeEmpty()</code></a></li>
<li><a href="#expectfilestring-toequalstring"><code>expect.file(string).toEqual(string)</code></a></li>
<li><a href="#expectfilestring-toequalfilestring"><code>expect.file(string).toEqualFile(string)</code></a></li>
<li><a href="#expectfilestring-toequallinesliststring"><code>expect.file(string).toEqualLines(list(string))</code></a></li>
<li><a href="#expectfilestring-tomatchstring"><code>expect.file(string).toMatch(string)</code></a></li>
<li><a href="#expectfilestring-tomatchsnapshot"><code>expect.file(string).toMatchSnapshot()</code></a></li>
<li><a href="#expectfloatfloat-tobecloseto-digits-int-float"><code>expect.float(float).toBeCloseTo(~digits: int=?, float)</code></a></li>
<li><a href="#expectfnunit-a-tothrow"><code>expect.fn(unit =&gt; 'a).toThrow()</code></a></li>
<li><a href="#expectfnunit-a-tothrowexceptionexn"><code>expect.fn(unit =&gt; 'a).toThrowException(exn)</code></a></li>
<li><a href="#expectintint-tobeint"><code>expect.int(int).toBe(int)</code></a></li>
<li><a href="#expectlinesliststring-tobeempty"><code>expect.lines(list(string)).toBeEmpty()</code></a></li>
<li><a href="#expectlinesliststring-toequalstring"><code>expect.lines(list(string)).toEqual(string)</code></a></li>
<li><a href="#expectlinesliststring-toequalfilestring"><code>expect.lines(list(string)).toEqualFile(string)</code></a></li>
<li><a href="#expectlinesliststring-toequallinesliststring"><code>expect.lines(list(string)).toEqualLines(list(string))</code></a></li>
<li><a href="#expectlinesliststring-tomatchstring"><code>expect.lines(list(string)).toMatch(string)</code></a></li>
<li><a href="#expectlinesliststring-tomatchsnapshot"><code>expect.lines(list(string)).toMatchSnapshot()</code></a></li>
<li><a href="#expectlistlist-a-tobeempty"><code>expect.list(list('a)).toBeEmpty()</code></a></li>
<li><a href="#expectlistlist-a-tocontain-a"><code>expect.list(list('a)).toContain('a)</code></a></li>
<li><a href="#expectlistlist-a-tocontainequal-equals-a-a-bool-a"><code>expect.list(list('a)).toContainEqual(~equals:('a, 'a) =&gt; bool=?, 'a)</code></a></li>
<li><a href="#expectlistactual-toequal-equals-expected"><code>expect.list(actual).toEqual(~equals, expected)</code></a></li>
<li><a href="#expectmockmock-lastcalledwith-args"><code>expect.mock(mock).lastCalledWith('args)</code></a></li>
<li><a href="#expectmockmock-lastreturnedwith-ret"><code>expect.mock(mock).lastReturnedWith('ret)</code></a></li>
<li><a href="#expectmockmock-nthcalledwith-equals-args-args-bool-int-args"><code>expect.mock(mock).nthCalledWith(~equals:('args, 'args) =&gt; bool=?, int, 'args)</code></a></li>
<li><a href="#expectmockmock-nthreturnedwith-equals-ret-ret-bool-int-args"><code>expect.mock(mock).nthReturnedWith(~equals:('ret, 'ret) =&gt; bool=?, int, 'args)</code></a></li>
<li><a href="#expectmockmock-tobecalled"><code>expect.mock(mock).toBeCalled()</code></a></li>
<li><a href="#expectmockmock-tobecalledtimesint"><code>expect.mock(mock).toBeCalledTimes(int)</code></a></li>
<li><a href="#expectmockmock-tobecalledwith-equals-args-args-bool-args"><code>expect.mock(mock).toBeCalledWith(~equals: ('args, 'args) =&gt; bool=?, 'args)</code></a></li>
<li><a href="#expectmockmock-tothrow"><code>expect.mock(mock).toThrow()</code></a></li>
<li><a href="#expectmockmock-tothrowexceptionexn"><code>expect.mock(mock).toThrowException(exn)</code></a></li>
<li><a href="#expectmockmock-toreturntimesint"><code>expect.mock(mock).toReturnTimes(int)</code></a></li>
<li><a href="#expectmockmock-toreturnwith-equals-ret-ret-bool-ret"><code>expect.mock(mock).toReturnWith(~equals: ('ret, 'ret) =&gt; bool=?, 'ret)</code></a></li>
<li><a href="#expectoption-a-tobe-equals-a-a-bool-option-a"><code>expect.option('a).toBe(~equals: ('a, 'a) =&gt; bool=?, option('a))</code></a></li>
<li><a href="#expectoptionoption-a-tobenone"><code>expect.option(option('a)).toBeNone()</code></a></li>
<li><a href="#expectoptionoption-a-tobesome"><code>expect.option(option('a)).toBeSome()</code></a></li>
<li><a href="#expectresultresult-a-tobe-equalsok-a-a-bool-equalserror-b-b-bool-result-a"><code>expect.result(result('a)).toBe(~equalsOk: ('a, 'a) =&gt; bool=?, ~equalsError: ('b, 'b) =&gt; bool =?, result('a))</code></a></li>
<li><a href="#expectresultresult-a-tobeok"><code>expect.result(result('a)).toBeOk()</code></a></li>
<li><a href="#expectresultresult-a-tobeerror"><code>expect.result(result('a)).toBeError()</code></a></li>
<li><a href="#expectsame-a-a"><code>expect.same('a, 'a)</code></a></li>
<li><a href="#expectnotsame-a-a"><code>expect.notSame('a, 'a)</code></a></li>
<li><a href="#expectstringstring-tobeempty"><code>expect.string(string).toBeEmpty()</code></a></li>
<li><a href="#expectstringstring-toequalstring"><code>expect.string(string).toEqual(string)</code></a></li>
<li><a href="#expectstringstring-toequalfilestring"><code>expect.string(string).toEqualFile(string)</code></a></li>
<li><a href="#expectstringstring-toequallinesliststring"><code>expect.string(string).toEqualLines(list(string))</code></a></li>
<li><a href="#expectstringstring-tomatchstring"><code>expect.string(string).toMatch(string)</code></a></li>
<li><a href="#expectstringstring-tomatchsnapshot"><code>expect.string(string).toMatchSnapshot()</code></a></li>
</ul>
<h2><a class="anchor" aria-hidden="true" id="expectarray"></a><a href="#expectarray" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.array</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> equalsFn('a) = ('a, 'a) =&gt; bool;

<span class="hljs-keyword">type</span> arrayMatchers('a) = {
  toEqual: (~equals: equalsFn('a)=?, array('a)) =&gt; unit,
  toBeEmpty: unit =&gt; unit,
  toContain: 'a =&gt; unit,
  toContainEqual: (~equals: equalsFn('a)=?, 'a) =&gt; unit,
};

<span class="hljs-keyword">type</span> arrayMatchersWithNot('a) = {
  not: arrayMatchers('a),
  toEqual: (~equals: equalsFn('a)=?, array('a)) =&gt; unit,
  toBeEmpty: unit =&gt; unit,
  toContain: 'a =&gt; unit,
  toContainEqual: (~equals: equalsFn('a)=?, 'a) =&gt; unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  array: 'a. array('a) =&gt; arrayMatchersWithNot('a)
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectarrayarray-a-tobeempty"></a><a href="#expectarrayarray-a-tobeempty" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.array(array('a)).toBeEmpty()</code></h3>
<p>Use <code>expect.array(expected).toBeEmpty()</code> to check that an array is empty.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.array.toBeEmpty"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Empty array should be empty"</span>, ({expect}) =&gt; {
    expect.array(<span class="hljs-literal">[|</span><span class="hljs-literal">|]</span>).toBeEmpty();
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectarrayarray-a-tocontain-a"></a><a href="#expectarrayarray-a-tocontain-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.array(array('a)).toContain('a)</code></h3>
<p>Use <code>expect.array(actual).toContain(expected)</code> when you want to check that an item is in an array. For testing items in the array, this uses <code>===</code>, a physical equality check.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Array example"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should contain"</span>, ({expect}) =&gt; {
    expect.array(<span class="hljs-literal">[|</span><span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span><span class="hljs-literal">|]</span>).toContain(<span class="hljs-number">2</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectarrayarray-a-tocontainequal-equals-a-a-bool-a"></a><a href="#expectarrayarray-a-tocontainequal-equals-a-a-bool-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.array(array('a)).toContainEqual(~equals:('a, 'a) =&gt; bool=?, 'a)</code></h3>
<p>Use <code>expect.array(actual).toContainEqual(~equals=?, expected)</code> when you want to check that an item is in an array. For testing items in the array, this uses <code>==</code> a structural equality check.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

<span class="hljs-keyword">type</span> insect = {
  name: string,
  numberOfLegs: int,
};

describe(<span class="hljs-string">"Array example"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"contain equal"</span>, ({expect}) =&gt; {
    expect.array(getInsects()).toContainEqual({
      name: <span class="hljs-string">"centipede"</span>,
      numberOfLegs: <span class="hljs-number">100</span>,
    });
  });
});
</code></pre>
<p>Comparing types that need a custom comparator (such as floats) can be done using <code>expect.array(actual).toContainEqual(~equals, expected)</code>.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

<span class="hljs-keyword">let</span> equals = (f1, f2) =&gt; abs_float(f1 <span class="hljs-operator">-.</span> f2) &lt; <span class="hljs-number">0.1</span>;

describe(<span class="hljs-string">"Array example"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"contain equal"</span>, ({expect}) =&gt; {
    expect.array(<span class="hljs-literal">[|</span><span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span><span class="hljs-literal">|]</span>).toContainEqual(~equals, <span class="hljs-number">0.99</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectarrayarray-a-toequal-equals-a-a-bool-array-a"></a><a href="#expectarrayarray-a-toequal-equals-a-a-bool-array-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.array(array('a)).toEqual(~equals:('a, 'a) =&gt; bool, array('a))</code></h3>
<p>Use <code>expect.array(actual).toEqual(~equals=?, expected)</code> to check that an array is equal to another array.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Array example"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"array equality"</span>, ({expect}) =&gt; {
    expect.array(countToThree()).toEqual(<span class="hljs-literal">[|</span><span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span><span class="hljs-literal">|]</span>);
  });
});
</code></pre>
<p>Comparing arrays of types that need a custom comparator (such as floats) can also be done.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

<span class="hljs-keyword">let</span> equals = (f1, f2) =&gt; abs_float(f1 <span class="hljs-operator">-.</span> f2) &lt; <span class="hljs-number">0.1</span>;

describe(<span class="hljs-string">"Array example"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"toEqual with custom comparator"</span>, ({expect}) =&gt; {
    expect.array(countToThreeWithFloats()).toEqual(~equals, <span class="hljs-literal">[|</span><span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span><span class="hljs-literal">|]</span>);
  });
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="expectassertions-as-of-rely-310"></a><a href="#expectassertions-as-of-rely-310" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.assertions</code> (as of Rely 3.1.0)</h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  assertions: int =&gt; bool,
  hasAssertions: unit =&gt; unit,
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectassertionsint"></a><a href="#expectassertionsint" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.assertions(int)</code></h3>
<p><code>expect.assertions(int)</code> verifies that a certain number of assertions are called during a test. This is often useful when testing code with callbacks, in order to make sure that assertions in a callback actually got called.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.assertions"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"doSomething calls both callbacks"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> callback1 = () =&gt; expect.bool(<span class="hljs-literal">true</span>).toBeTrue();
    <span class="hljs-keyword">let</span> callback2 = () =&gt; expect.bool(<span class="hljs-literal">true</span>).not.toBeFalse();

    doSomething(callback1, callback2);

    <span class="hljs-comment">/* this line can be anywhere inside the function body, if there are multiple
     * calls to expect.assertions, the last one takes precedence */</span>
    expect.assertions(<span class="hljs-number">2</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expecthasassertions"></a><a href="#expecthasassertions" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.hasAssertions()</code></h3>
<p><code>expect.hasAssertions()</code> verifies that at least one assertion is called during a test. This is often useful when testing code with callbacks, in order to make sure that assertions in a callback actually got called.</p>
<p>Suppose you have an application that allows for side effects to be dispatched on changes to its state via a callback. We could also use such a feature to test that all state changes in a certain path are valid by making an assertion inside that callback. If we want to do that and also ensure that at least one state change took place, we could write the following code:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.hasAssertions"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"our callback gets called"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> validateState = (state) =&gt; expect.bool(<span class="hljs-literal">true</span>).toBeTrue();

    <span class="hljs-module-identifier">App</span>.run(validateState);

    <span class="hljs-comment">/* this line can be anywhere inside the function body, if there are multiple
     * calls to expect.assertions, the last one takes precedence */</span>
    expect.hasAssertions();
  });
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="expectbool"></a><a href="#expectbool" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.bool</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> boolMatchers = {
  toBe: bool =&gt; unit,
  toBeTrue: unit =&gt; unit,
  toBeFalse: unit =&gt; unit,
};
<span class="hljs-keyword">type</span> boolMatchersWithNot = {
  not: boolMatchers,
  toBe: bool =&gt; unit,
  toBeTrue: unit =&gt; unit,
  toBeFalse: unit =&gt; unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  bool: bool =&gt; boolMatchersWithNot
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectboolbool-tobebool"></a><a href="#expectboolbool-tobebool" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.bool(bool).toBe(bool)</code></h3>
<p>Use <code>expect.bool(actual).toBe(expected)</code> to check that a boolean value is equal to a particular boolean value.</p>
<p>For example this can be useful when writing tests inside of a <code>List.map</code> statement.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.bool"</span>, ({test}) =&gt; {
  <span class="hljs-keyword">let</span> _ =
    <span class="hljs-module-identifier">List</span>.map(
      ((testName, food, expected)) =&gt;
        test(testName, ({expect}) =&gt;
          expect.bool(isDelicious(food)).toBe(expected)
        ),
      <span class="hljs-literal">[</span>(<span class="hljs-string">"expect bacon to be delicious"</span>, <span class="hljs-string">"bacon"</span>, <span class="hljs-literal">true</span>)<span class="hljs-literal">]</span>,
    );
  ();
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectboolbool-tobetrue"></a><a href="#expectboolbool-tobetrue" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.bool(bool).toBeTrue()</code></h3>
<p>Use <code>expect.bool(actual).toBeTrue()</code> to check that a boolean value is equal to true.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.bool"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"expect bacon to be delicious"</span>, ({expect}) =&gt; {
    expect.bool(isDelicious(<span class="hljs-string">"bacon"</span>)).toBeTrue();
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectboolbool-tobefalse"></a><a href="#expectboolbool-tobefalse" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.bool(bool).toBeFalse()</code></h3>
<p>Use <code>expect.bool(actual).toBeFalse()</code> to check that a boolean value is equal to false.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.bool"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"expect socks not to be delicious"</span>, ({expect}) =&gt; {
    expect.bool(isDelicious(<span class="hljs-string">"socks"</span>)).toBeFalse();
  });
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="expectequal"></a><a href="#expectequal" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.equal</code></h2>
<pre><code class="hljs css language-reasonml"><span class="hljs-keyword">type</span> equals<span class="hljs-constructor">Fn('<span class="hljs-params">a</span>)</span> =<span class="hljs-function"> ('<span class="hljs-params">a</span>, '<span class="hljs-params">a</span>) =&gt;</span> <span class="hljs-built_in">bool</span>;

<span class="hljs-keyword">let</span> expect = {<span class="hljs-operator">
  ...
  </span>equal:<span class="hljs-function"> (<span class="hljs-params">~equals</span>: <span class="hljs-params">equalsFn</span>('<span class="hljs-params">a</span>), '<span class="hljs-params">a</span>, '<span class="hljs-params">a</span>) =&gt;</span> <span class="hljs-built_in">unit</span>,
  notEqual:<span class="hljs-function"> (<span class="hljs-params">~equals</span>: <span class="hljs-params">equalsFn</span>('<span class="hljs-params">a</span>), '<span class="hljs-params">a</span>, '<span class="hljs-params">a</span>) =&gt;</span> <span class="hljs-built_in">unit</span>,<span class="hljs-operator">
  ...
</span>};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectequal-equals-a-a-bool-a-a"></a><a href="#expectequal-equals-a-a-bool-a-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.equal(~equals: ('a, 'a) =&gt; bool=?, 'a, 'a)</code></h3>
<p>Use <code>expect.equal(~equals=?, expected, actual)</code> to check that two values are equal using <code>==</code>, a structural equality check. The negation of <code>expect.equal</code> is <code>expect.notEqual</code></p>
<p>For example to structurally compare two records you could write:</p>
<pre><code class="hljs css language-reasonml"><span class="hljs-keyword">open</span> TestFramework;

<span class="hljs-keyword">type</span> myType = {
  <span class="hljs-built_in">string</span>,
  <span class="hljs-built_in">int</span>,
};

describe(<span class="hljs-string">"expect.equal"</span>,<span class="hljs-function"> ({<span class="hljs-params">test</span>}) =&gt;</span> {
  test(<span class="hljs-string">"should be  equal"</span>,<span class="hljs-function"> ({<span class="hljs-params">expect</span>}) =&gt;</span> {
    expect.equal({<span class="hljs-built_in">string</span>: <span class="hljs-string">"hello"</span>, <span class="hljs-built_in">int</span>: <span class="hljs-number">42</span>}, {<span class="hljs-built_in">string</span>: <span class="hljs-string">"hello"</span>, <span class="hljs-built_in">int</span>: <span class="hljs-number">42</span>});
  });
});
</code></pre>
<p>Comparing types that need a custom comparator (such as records that contain floats) can also be done by providing a custom equals function:</p>
<pre><code class="hljs css language-reasonml"><span class="hljs-keyword">open</span> TestFramework;

<span class="hljs-keyword">type</span> myType = {
  <span class="hljs-built_in">string</span>,
  <span class="hljs-built_in">float</span>,
};

describe(<span class="hljs-string">"expect.equal"</span>,<span class="hljs-function"> ({<span class="hljs-params">test</span>}) =&gt;</span> {
  test(<span class="hljs-string">"should be  equal"</span>,<span class="hljs-function"> ({<span class="hljs-params">expect</span>}) =&gt;</span> {
    <span class="hljs-keyword">let</span> equals =<span class="hljs-function"> (<span class="hljs-params">t1</span>, <span class="hljs-params">t2</span>) =&gt;</span>
      t1.<span class="hljs-built_in">string</span><span class="hljs-operator"> == </span>t2.<span class="hljs-built_in">string</span><span class="hljs-operator"> &amp;&amp; </span>abs<span class="hljs-constructor">_float(<span class="hljs-params">t1</span>.<span class="hljs-params">float</span> -. <span class="hljs-params">t2</span>.<span class="hljs-params">float</span>)</span> &lt; <span class="hljs-number">0.001</span>;
    expect.equal(
      ~equals,
      {<span class="hljs-built_in">string</span>: <span class="hljs-string">"hello"</span>, <span class="hljs-built_in">float</span>: <span class="hljs-number">42.</span>},
      {<span class="hljs-built_in">string</span>: <span class="hljs-string">"hello"</span>, <span class="hljs-built_in">float</span>: <span class="hljs-number">41.999999</span>},
    );
  });
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="expectext"></a><a href="#expectext" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.ext</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">let</span> expect('ext): {
  <span class="hljs-operator">...</span>
  ext: 'ext
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectext-1"></a><a href="#expectext-1" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.ext</code></h3>
<p>You can add your own custom matchers to Rely. The matchers you define are available under the ext field of the expect record. Full documentation for writing and using custom matchers can be found <a href="/docs/rely/api#custom-matchers">here</a>.</p>
<h2><a class="anchor" aria-hidden="true" id="expectfile"></a><a href="#expectfile" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.file</code></h2>
<p>Use <code>expect.file(filename)</code> to make assertions about the contents of a file. <code>expect.file</code> provides the same API as <a href="#expectstring"><code>expect.string</code></a> and handles the work of reading from the file.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> stringMatchers = {
  toBeEmpty: unit =&gt; unit,
  toEqual: string =&gt; unit,
  toEqualFile: string =&gt; unit,
  toEqualLines: list(string) =&gt; unit,
  toMatch: string =&gt; unit,
};
<span class="hljs-keyword">type</span> stringMatchersWithNot = {
  not: stringMatchers,
  toBeEmpty: unit =&gt; unit,
  toEqual: string =&gt; unit,
  toEqualFile: string =&gt; unit,
  toEqualLines: list(string) =&gt; unit,
  toMatch: string =&gt; unit,
  toMatchSnapshot: unit =&gt; unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  file: string =&gt; stringMatchersWithNot,
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectfilestring-tobeempty"></a><a href="#expectfilestring-tobeempty" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.file(string).toBeEmpty()</code></h3>
<p>Use <code>expect.file(filename).toBeEmpty</code> to check that a file is empty.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My awesome app"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"error log should be empty"</span>, ({expect}) =&gt; {
    <span class="hljs-module-identifier">MyApp</span>.run();

    expect.file(<span class="hljs-string">"errorLog.txt"</span>).toBeEmpty();
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectfilestring-toequalstring"></a><a href="#expectfilestring-toequalstring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.file(string).toEqual(string)</code></h3>
<p>Use <code>expect.file(filename).toEqual(expected)</code> to check that the contents of a file are equal to some expected value.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Spaceballs"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Interrogate Roland"</span>, ({expect}) =&gt; {
    <span class="hljs-module-identifier">DarkHelmet</span>.interrogate(<span class="hljs-string">"Roland"</span>);

    expect.file(<span class="hljs-string">"password.txt"</span>).toEqual(<span class="hljs-string">"12345"</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectfilestring-toequalfilestring"></a><a href="#expectfilestring-toequalfilestring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.file(string).toEqualFile(string)</code></h3>
<p>Use <code>expect.file(actualFilename).toEqualFile(expectedFilename)</code> to check that the contents of a file are equal to the contents of another file.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Spaceballs"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Passwords should match"</span>, ({expect}) =&gt; {
    expect.file(<span class="hljs-string">"DefenseShield/password.txt"</span>).toEqualFile(<span class="hljs-string">"Skroob/luggagePassword.txt"</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectfilestring-toequallinesliststring"></a><a href="#expectfilestring-toequallinesliststring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.file(string).toEqualLines(list(string))</code></h3>
<p>Use `expect.file(actualFilename).toEqualLines(expectedLines) to check that the contents of a file are equal a list of strings joined by a newline.</p>
<p>For example if you wanted to write a program to generate a particular poem into a file called <code>poem.txt</code>, you could write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Deep Thought"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should write poetry"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> expected = <span class="hljs-literal">[</span>
      <span class="hljs-string">"Roses are red"</span>,
      <span class="hljs-string">"Violets are blue"</span>,
      <span class="hljs-string">"Rely is great"</span>,
      <span class="hljs-string">"Not false is true"</span>,
    <span class="hljs-literal">]</span>;

    <span class="hljs-module-identifier">DeepThought</span>.writeSomePoetry();

    expect.file(<span class="hljs-string">"poem.txt"</span>).toEqualLines(expected);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectfilestring-tomatchstring"></a><a href="#expectfilestring-tomatchstring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.file(string).toMatch(string)</code></h3>
<p>Use <code>expect.file(actualFilename).toMatch(regex)</code> to verify that a file matches a PCRE regex.</p>
<p>For example if we want to verify that the file <code>secretRecipe.txt</code> contains either <code>bacon</code> or <code>sausage</code> I could write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My recipe"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should contain a cured pork product"</span>, ({expect}) =&gt; {
    expect.file(<span class="hljs-string">"secretRecipe.txt"</span>).toMatch(<span class="hljs-string">"(bacon|sausage)"</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectfilestring-tomatchsnapshot"></a><a href="#expectfilestring-tomatchsnapshot" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.file(string).toMatchSnapshot()</code></h3>
<p>This ensures that the file matches the most recent snapshot. To generate a new snapshot or update an old one you can run Rely via the command line and pass the <code>-u</code> flag.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My config generator"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"generate default config"</span>, ({expect}) =&gt; {
    <span class="hljs-module-identifier">ConfigGenerator</span>.generateDefaultConfig(<span class="hljs-string">"test.json"</span>);
    expect.file(<span class="hljs-string">"test.json"</span>).toMatchSnapshot();
  });
});
</code></pre>
<blockquote>
<p>Note that there is no <code>.not.toMatchSnapshot</code> matcher.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="expectfloat"></a><a href="#expectfloat" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.float</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> floatMatchers = {toBeCloseTo: (~digits: int=?, float) =&gt; unit};
<span class="hljs-keyword">type</span> floatMatchersWithNot = {
  toBeCloseTo: (~digits: int=?, float) =&gt; unit,
  not: floatMatchers,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  float: float =&gt; floatMatchersWithNot,
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectfloatfloat-tobecloseto-digits-int-float"></a><a href="#expectfloatfloat-tobecloseto-digits-int-float" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.float(float).toBeCloseTo(~digits: int=?, float)</code></h3>
<p>Using exact equality with floating point numbers doesn't work in general. For example the following test fails:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"float equality"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"using expect.equals will cause this test to fail"</span>, ({expect}) =&gt; {
    expect.equal(<span class="hljs-number">0.1</span> <span class="hljs-operator">+.</span> <span class="hljs-number">0.2</span>, <span class="hljs-number">0.3</span>);
  });
});
</code></pre>
<p>This fails because <code>0.1 +. 0.2</code> is equal to <code>0.300000000000000044</code> in Reason due to the underlying representation of floating point numbers.</p>
<p>Instead, use <code>expect.float(actual).toBeCloseTo(~digits, expected)</code>. For example, if you want to be sure that 0.2 + 0.1 is equal ot 0.3 with a precision of 5 decimal digits you can use this test:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"float equality"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should pass with expect.float.toBeCloseTo"</span>, ({expect}) =&gt; {
    expect.float(<span class="hljs-number">0.1</span> <span class="hljs-operator">+.</span> <span class="hljs-number">0.2</span>).toBeCloseTo(~digits=<span class="hljs-number">5</span>, <span class="hljs-number">0.3</span>);
  });
});
</code></pre>
<p>The optional <code>~digits</code> argument has a default value of <code>2</code>. The exact criterion used is <code>abs_float(actual -. expected) &lt; (10 ** float_of_int(- digits)) /. 2.0</code>. With the default value this translates to <code>abs_float(actual -. expected) &lt; 0.005</code></p>
<h2><a class="anchor" aria-hidden="true" id="expectfn"></a><a href="#expectfn" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.fn</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> negatableFnMatchers = {toThrow: unit =&gt; unit};
<span class="hljs-keyword">type</span> fnMatchersWithNot = {
  not: negatableFnMatchers,
  toThrow: unit =&gt; unit,
  toThrowException: exn =&gt; unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  fn: 'a. (unit =&gt; 'a) =&gt; fnMatchersWithNot
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectfnunit-a-tothrow"></a><a href="#expectfnunit-a-tothrow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.fn(unit =&gt; 'a).toThrow()</code></h3>
<p>Use <code>expect.fn(function).toThrow()</code> to test that a function throws when it is called. For example, if we want to test that <code>ToothpasteFactory.makeFlavor(&quot;duck&quot;)</code> throws an exception because duck flavored toothpaste is too fowl, we could write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"ToothpasteFactory"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should throw an exception if asked to make bird flavored toothpaste"</span>, ({expect}) =&gt; {
    expect.fn(() =&gt; <span class="hljs-module-identifier">ToothpasteFactory</span>.makeFlavor(<span class="hljs-string">"duck"</span>)).toThrow();
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectfnunit-a-tothrowexceptionexn"></a><a href="#expectfnunit-a-tothrowexceptionexn" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.fn(unit =&gt; 'a).toThrowException(exn)</code></h3>
<p>Use <code>expect.fn(function).toThrowException(exn)</code> to test that a function throws a specific exception when it is called. For example if we want to test that dividing by zero throws a <code>Division_by_zero</code> exception we could write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Arithmetic"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should throw Division_by_zero when dividing by zero"</span>, ({expect}) =&gt; {
    expect.fn(() =&gt; <span class="hljs-number">1</span> <span class="hljs-operator">/</span> <span class="hljs-number">0</span>).toThrowException(<span class="hljs-constructor">Division_by_zero</span>);
  });
});
</code></pre>
<blockquote>
<p>Note that there is no expect.fn(unit =&gt; 'a).not.toThrowException(exn). It is encouraged to use expect.fn(unit =&gt; 'a).not.toThrow() rather than asserting that a particular exception was not thrown.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="expectint"></a><a href="#expectint" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.int</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> intMatchers = {toBe: int =&gt; unit};
<span class="hljs-keyword">type</span> intMatchersWithNot = {
  not: intMatchers,
  toBe: int =&gt; unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  int: intMatchersWithNot,
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectintint-tobeint"></a><a href="#expectintint-tobeint" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.int(int).toBe(int)</code></h3>
<p>Use <code>expect.int(actual).toBe(expected)</code> to check that an integer is equal to a particular value. For example if you expect Deep Thought to return <code>42</code> when asked to calculate the answer to the ultimate question, you could write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.int.toBe"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Calculate answer to the ultimate question"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> answer = <span class="hljs-module-identifier">DeepThought</span>.answerUltimateQuestion();

    expect.int(answer).toBe(<span class="hljs-number">42</span>);
  });
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="expectlines"></a><a href="#expectlines" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.lines</code></h2>
<p>Use <code>expect.lines(lines)</code> to make assertions about lines of text. <code>expect.lines</code> provides the same API as <a href="#expectstring"><code>expect.string</code></a> and compares against the result of <code>String.concat(&quot;\n&quot;, lines)</code>.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> stringMatchers = {
  toBeEmpty: unit =&gt; unit,
  toEqual: string =&gt; unit,
  toEqualFile: string =&gt; unit,
  toEqualLines: list(string) =&gt; unit,
  toMatch: string =&gt; unit,
};
<span class="hljs-keyword">type</span> stringMatchersWithNot = {
  not: stringMatchers,
  toBeEmpty: unit =&gt; unit,
  toEqual: string =&gt; unit,
  toEqualFile: string =&gt; unit,
  toEqualLines: list(string) =&gt; unit,
  toMatch: string =&gt; unit,
  toMatchSnapshot: unit =&gt; unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  lines: list(string) =&gt; stringMatchersWithNot,
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectlinesliststring-tobeempty"></a><a href="#expectlinesliststring-tobeempty" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.lines(list(string)).toBeEmpty()</code></h3>
<p>Use <code>expect.lines(actual).toBeEmpty</code> to check that a list of lines is empty.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Historical movies"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"the Charlie Chaplin movei should have no lines"</span>, ({expect}) =&gt; {
    expect.lines(<span class="hljs-module-identifier">CharlieChaplinMovie</span>.script).toBeEmpty();
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectlinesliststring-toequalstring"></a><a href="#expectlinesliststring-toequalstring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.lines(list(string)).toEqual(string)</code></h3>
<p>Use <code>expect.lines(actual).toEqual(expected)</code> to check that some lines of text are equal to an expected string.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Lines"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"to equal"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> greeting = <span class="hljs-literal">[</span>
      <span class="hljs-string">"Hello"</span>,
      <span class="hljs-string">"World"</span>
    <span class="hljs-literal">]</span>

    expect.lines(greeting).toEqual(<span class="hljs-string">"Hello\nWorld"</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectlinesliststring-toequalfilestring"></a><a href="#expectlinesliststring-toequalfilestring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.lines(list(string)).toEqualFile(string)</code></h3>
<p>Use <code>expect.lines(actual).toEqualFile(filename)</code> to check that the some lines are equal to the contents of a file.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Deep Thought"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should write poetry"</span>, ({expect}) =&gt; {
    expect.lines(<span class="hljs-module-identifier">DeepThought</span>.writeSomePoetry).toEqualFile(<span class="hljs-string">"poem.txt"</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectlinesliststring-toequallinesliststring"></a><a href="#expectlinesliststring-toequallinesliststring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.lines(list(string)).toEqualLines(list(string))</code></h3>
<p>Use <code>expect.lines(actual).toEqualLines(expected)</code> to check that some lines are equal to another set of lines.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Deep Thought"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should write poetry"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> expected = <span class="hljs-literal">[</span>
      <span class="hljs-string">"Roses are red"</span>,
      <span class="hljs-string">"Violets are blue"</span>,
      <span class="hljs-string">"Rely is great"</span>,
      <span class="hljs-string">"Not false is true"</span>,
    <span class="hljs-literal">]</span>;

    <span class="hljs-keyword">let</span> actual = <span class="hljs-module-identifier">DeepThought</span>.writeSomePoetry();

    expect.lines(actual).toEqualLines(expected);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectlinesliststring-tomatchstring"></a><a href="#expectlinesliststring-tomatchstring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.lines(list(string)).toMatch(string)</code></h3>
<p>Use <code>expect.lines(actual).toMatch(regex)</code> to verify that a file matches a PCRE regex.</p>
<p>For example if we want to verify that the a recipe generator module generates a recipe that contains either <code>bacon</code> or <code>sausage</code> I could write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My recipe"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should contain a cured pork product"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> recipe = <span class="hljs-module-identifier">RecipeGenerator</span>.makeRecipe();

    expect.lines(recipe).toMatch(<span class="hljs-string">"(bacon|sausage)"</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectlinesliststring-tomatchsnapshot"></a><a href="#expectlinesliststring-tomatchsnapshot" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.lines(list(string)).toMatchSnapshot()</code></h3>
<p>This ensures that the lines matches the most recent snapshot. To generate a new snapshot or update an old one you can run Rely via the command line and pass the <code>-u</code> flag.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My config generator"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"generate default config"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> actual = <span class="hljs-module-identifier">ConfigGenerator</span>.generateDefaultConfig();
    expect.lines(actual).toMatchSnapshot();
  });
});
</code></pre>
<blockquote>
<p>Note that there is no <code>.not.toMatchSnapshot</code> matcher.</p>
</blockquote>
<h2><a class="anchor" aria-hidden="true" id="expectlist"></a><a href="#expectlist" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.list</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> equalsFn('a) = ('a, 'a) =&gt; bool;

<span class="hljs-keyword">type</span> listMatchers('a) = {
  toEqual: (~equals: equalsFn('a)=?, list('a)) =&gt; unit,
  toBeEmpty: unit =&gt; unit,
  toContain: 'a =&gt; unit,
  toContainEqual: (~equals: equalsFn('a)=?, 'a) =&gt; unit,
};

<span class="hljs-keyword">type</span> listMatchersWithNot('a) = {
  not: listMatchers('a),
  toEqual: (~equals: equalsFn('a)=?, list('a)) =&gt; unit,
  toBeEmpty: unit =&gt; unit,
  toContain: 'a =&gt; unit,
  toContainEqual: (~equals: equalsFn('a)=?, 'a) =&gt; unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  list: 'a. list('a) =&gt; listMatchersWithNot('a),
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectlistlist-a-tobeempty"></a><a href="#expectlistlist-a-tobeempty" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.list(list('a)).toBeEmpty()</code></h3>
<p>Use <code>expect.list(expected).toBeEmpty()</code> to check that a list is empty.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.list.toBeEmpty"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Empty list should be empty"</span>, ({expect}) =&gt; {
    expect.list(<span class="hljs-literal">[</span><span class="hljs-literal">]</span>).toBeEmpty();
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectlistlist-a-tocontain-a"></a><a href="#expectlistlist-a-tocontain-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.list(list('a)).toContain('a)</code></h3>
<p>Use <code>expect.list(actual).toContain(expected)</code> when you want to check that an item is in an list. For testing items in the list, this uses <code>===</code>, a physical equality check.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"list example"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should contain"</span>, ({expect}) =&gt; {
    expect.list(<span class="hljs-literal">[</span><span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span><span class="hljs-literal">]</span>).toContain(<span class="hljs-number">2</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectlistlist-a-tocontainequal-equals-a-a-bool-a"></a><a href="#expectlistlist-a-tocontainequal-equals-a-a-bool-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.list(list('a)).toContainEqual(~equals:('a, 'a) =&gt; bool=?, 'a)</code></h3>
<p>Use <code>expect.list(actual).toContainEqual(~equals=-?, 'a)</code> when you want to check that an item is in an list. For testing items in the list, this uses <code>==</code> a structural equality check.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

<span class="hljs-keyword">type</span> insect = {
  name: string,
  numberOfLegs: int,
};

describe(<span class="hljs-string">"list example"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"contain equal"</span>, ({expect}) =&gt; {
    expect.list(getInsects()).toContainEqual({
      name: <span class="hljs-string">"centipede"</span>,
      numberOfLegs: <span class="hljs-number">100</span>,
    });
  });
});
</code></pre>
<p>Comparing types that need a custom comparator (such as floats) can be done using <code>expect.list(actual).toContainEqual</code>.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

<span class="hljs-keyword">let</span> equals = (f1, f2) =&gt; abs_float(f1 <span class="hljs-operator">-.</span> f2) &lt; <span class="hljs-number">0.1</span>;

describe(<span class="hljs-string">"list example"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"contain equal"</span>, ({expect}) =&gt; {
    expect.list(<span class="hljs-literal">[</span><span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span><span class="hljs-literal">]</span>).toContainEqual(~equals, <span class="hljs-number">0.99</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectlistactual-toequal-equals-expected"></a><a href="#expectlistactual-toequal-equals-expected" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.list(actual).toEqual(~equals, expected)</code></h3>
<p>Use <code>expect.list(actual).toEqual(~equals=?, expected)</code> to check that an list is equal to another list.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"list example"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"list equality"</span>, ({expect}) =&gt; {
    expect.list(countToThree()).toEqual(<span class="hljs-literal">[</span><span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span><span class="hljs-literal">]</span>);
  });
});
</code></pre>
<p>Comparing lists of types that need a custom comparator (such as floats) can also be done.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

<span class="hljs-keyword">let</span> equals = (f1, f2) =&gt; abs_float(f1 <span class="hljs-operator">-.</span> f2) &lt; <span class="hljs-number">0.1</span>;

describe(<span class="hljs-string">"List example"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"toEqual with custom comparator"</span>, ({expect}) =&gt; {
    expect.list(countToThreeWithFloats()).toEqual(~equals, <span class="hljs-literal">[</span><span class="hljs-number">1.</span>, <span class="hljs-number">2.</span>, <span class="hljs-number">3.</span><span class="hljs-literal">]</span>);
  });
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="expectmock"></a><a href="#expectmock" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> equalsFn('a) = ('a, 'a) =&gt; bool;

<span class="hljs-keyword">type</span> negatableMockMatchers('tupledArgs, 'ret) = {
  toThrow: unit =&gt; unit,
  toBeCalled: unit =&gt; unit,
  toBeCalledTimes: int =&gt; unit,
  toBeCalledWith: (~equals: equalsFn('tupledArgs)=?, 'tupledArgs) =&gt; unit,
  lastCalledWith: (~equals: equalsFn('tupledArgs)=?, 'tupledArgs) =&gt; unit,
  nthCalledWith: (~equals: equalsFn('tupledArgs)=?, int, 'tupledArgs) =&gt; unit,
  toReturnTimes: int =&gt; unit,
  toReturnWith: (~equals: equalsFn('ret)=?, 'ret) =&gt; unit,
  lastReturnedWith: (~equals: equalsFn('ret)=?, 'ret) =&gt; unit,
  nthReturnedWith: (~equals: equalsFn('ret)=?, int, 'ret) =&gt; unit,
};

<span class="hljs-keyword">type</span> matchersWithNot('tupledArgs, 'ret) = {
  not: negatableMockMatchers('tupledArgs, 'ret),
  toThrow: unit =&gt; unit,
  toThrowException: exn =&gt; unit,
  toBeCalled: unit =&gt; unit,
  toBeCalledTimes: int =&gt; unit,
  toBeCalledWith: (~equals: equalsFn('tupledArgs)=?, 'tupledArgs) =&gt; unit,
  lastCalledWith: (~equals: equalsFn('tupledArgs)=?, 'tupledArgs) =&gt; unit,
  nthCalledWith: (~equals: equalsFn('tupledArgs)=?, int, 'tupledArgs) =&gt; unit,
  toReturnTimes: int =&gt; unit,
  toReturnWith: (~equals: equalsFn('ret)=?, 'ret) =&gt; unit,
  lastReturnedWith: (~equals: equalsFn('ret)=?, 'ret) =&gt; unit,
  nthReturnedWith: (~equals: equalsFn('ret)=?, int, 'ret) =&gt; unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>,
  mock:
  'fn 'ret 'tupledArgs.
  <span class="hljs-module-identifier">Mock</span>.t('fn, 'ret, 'tupledArgs) =&gt; matchersWithNot('tupledArgs, 'ret),
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-lastcalledwith-args"></a><a href="#expectmockmock-lastcalledwith-args" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).lastCalledWith('args)</code></h3>
<p>Use <code>expect.mock(mock).lastCalledWith(args)</code> to test what arguments a mock function was last called with.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Mock matchers"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"lastCalledWith"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(a =&gt; a);
    <span class="hljs-keyword">let</span> mockFn = <span class="hljs-module-identifier">Mock</span>.fn(mock);

    <span class="hljs-keyword">let</span> _ = mockFn(<span class="hljs-number">1</span>);
    <span class="hljs-keyword">let</span> _ = mockFn(<span class="hljs-number">2</span>);

    expect.mock(mock).lastCalledWith(<span class="hljs-number">2</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-lastreturnedwith-ret"></a><a href="#expectmockmock-lastreturnedwith-ret" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).lastReturnedWith('ret)</code></h3>
<p>Use <code>expect.mock(mock).lastCalledWith(args)</code> to test what arguments a mock function was last called with.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Mock matchers"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"lastCalledWith"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(n =&gt; <span class="hljs-number">2</span> <span class="hljs-operator">*</span> n);
    <span class="hljs-keyword">let</span> mockFn = <span class="hljs-module-identifier">Mock</span>.fn(mock);

    <span class="hljs-keyword">let</span> _ = mockFn(<span class="hljs-number">1</span>);
    <span class="hljs-keyword">let</span> _ = mockFn(<span class="hljs-number">2</span>);

    expect.mock(mock).lastReturnedWith(<span class="hljs-number">4</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-nthcalledwith-equals-args-args-bool-int-args"></a><a href="#expectmockmock-nthcalledwith-equals-args-args-bool-int-args" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).nthCalledWith(~equals:('args, 'args) =&gt; bool=?, int, 'args)</code></h3>
<p>Use <code>expect.mock(mock).nthCalledWith(~equals=?, n, expected)</code> to test what arguments a mock function was called with for its nth call. For example suppose that you are implementing <code>map</code> for some data structure and want to verify that the function is called based on the order elements are added to the structure. You can write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My data structure"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"map calls the passed in function in the order elements are added"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> double = x =&gt; x <span class="hljs-operator">*</span> <span class="hljs-number">2</span>;
    <span class="hljs-comment">/*there are constructors for up to 7 args */</span>
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(double);

    <span class="hljs-keyword">let</span> myStructure =
      <span class="hljs-module-identifier">MyStructure</span>.empty <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">10</span>) <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">50</span>);

    <span class="hljs-keyword">let</span> _ = <span class="hljs-module-identifier">MyStructure</span>.map(<span class="hljs-module-identifier">Mock</span>.fn(mock), myStructure);

    expect.mock(mock).nthCalledWith(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>);
    expect.mock(mock).nthCalledWith(<span class="hljs-number">2</span>, <span class="hljs-number">50</span>);
  });
});
</code></pre>
<p>For dealing with floats or other situations in which custom equality is required, a custom equals function can be provided:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My data structure"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"map calls the passed in function in the order elements are added"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> double = x =&gt; x <span class="hljs-operator">*.</span> <span class="hljs-number">2.</span>;
    <span class="hljs-keyword">let</span> equals = (a, b) =&gt; abs_float(a <span class="hljs-operator">-.</span> b) &lt; <span class="hljs-number">0.1</span>;

    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(double);

    <span class="hljs-keyword">let</span> myStructure =
      <span class="hljs-module-identifier">MyStructure</span>.empty <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">10.</span>) <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">50.</span>);

    <span class="hljs-keyword">let</span> _ = <span class="hljs-module-identifier">MyStructure</span>.map(<span class="hljs-module-identifier">Mock</span>.fn(mock), myStructure);

    expect.mock(mock).nthCalledWith(~equals, <span class="hljs-number">1</span>, <span class="hljs-number">10.</span>);
    expect.mock(mock).nthCalledWith(~equals, <span class="hljs-number">2</span>, <span class="hljs-number">50.</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-nthreturnedwith-equals-ret-ret-bool-int-args"></a><a href="#expectmockmock-nthreturnedwith-equals-ret-ret-bool-int-args" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).nthReturnedWith(~equals:('ret, 'ret) =&gt; bool=?, int, 'args)</code></h3>
<p>Use <code>expect.mock(mock).nthReturnedWith(~equals=?, n, expected)</code> to test the specific value that a mock function returned for the nth call. For example suppose that you are implementing <code>map</code> for some data structure and want to verify that the function is called based on the order elements are added to the structure. You can write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My data structure"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"map calls the passed in function in the order elements are added"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> double = x =&gt; x <span class="hljs-operator">*</span> <span class="hljs-number">2</span>;
    <span class="hljs-comment">/*there are constructors for up to 7 args */</span>
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(double);

    <span class="hljs-keyword">let</span> myStructure =
      <span class="hljs-module-identifier">MyStructure</span>.empty <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">10</span>) <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">50</span>);

    <span class="hljs-keyword">let</span> _ = <span class="hljs-module-identifier">MyStructure</span>.map(<span class="hljs-module-identifier">Mock</span>.fn(mock), myStructure);

    expect.mock(mock).nthReturnedWith(<span class="hljs-number">1</span>, <span class="hljs-number">20</span>);
    expect.mock(mock).nthReturnedWith(<span class="hljs-number">2</span>, <span class="hljs-number">100</span>);
  });
});
</code></pre>
<p>For dealing with floats or other situations in which custom equality is required, a custom equals function can be provided:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My data structure"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"map calls the passed in function in the order elements are added"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> double = x =&gt; x <span class="hljs-operator">*.</span> <span class="hljs-number">2.</span>;
    <span class="hljs-keyword">let</span> equals = (a, b) =&gt; abs_float(a <span class="hljs-operator">-.</span> b) &lt; <span class="hljs-number">0.1</span>;

    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(double);

    <span class="hljs-keyword">let</span> myStructure =
      <span class="hljs-module-identifier">MyStructure</span>.empty <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">10.</span>) <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">50.</span>);

    <span class="hljs-keyword">let</span> _ = <span class="hljs-module-identifier">MyStructure</span>.map(<span class="hljs-module-identifier">Mock</span>.fn(mock), myStructure);

    expect.mock(mock).nthReturnedWith(~equals, <span class="hljs-number">1</span>, <span class="hljs-number">20.</span>);
    expect.mock(mock).nthReturnedWith(~equals, <span class="hljs-number">2</span>, <span class="hljs-number">100.</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-tobecalled"></a><a href="#expectmockmock-tobecalled" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).toBeCalled()</code></h3>
<p>Use <code>expect.mock(mock).toBeCalled</code> to ensure that a mock function got called.</p>
<p>For example suppose that you are implementing <code>map</code> for some data structure and want to verify that the function argument to map is actually called on a non empty structure. To test this, you could write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My data structure"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"map actually uses the passed in function"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> double = x =&gt; x <span class="hljs-operator">*</span> <span class="hljs-number">2</span>;
    <span class="hljs-comment">/*there are constructors for up to 7 args */</span>
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(double);

    <span class="hljs-keyword">let</span> myStructure = <span class="hljs-module-identifier">MyStructure</span>.empty <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">1</span>);

    <span class="hljs-keyword">let</span> _ = <span class="hljs-module-identifier">MyStructure</span>.map(<span class="hljs-module-identifier">Mock</span>.fn(mock), myStructure);

    expect.mock(mock).toBeCalled();
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-tobecalledtimesint"></a><a href="#expectmockmock-tobecalledtimesint" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).toBeCalledTimes(int)</code></h3>
<p>Use <code>expect.mock(mock).toBeCalledTimes(int)</code> to ensure that a mock function got called a certain number of times.</p>
<p>For example suppose that you are implementing <code>map</code> for some data structure and want to verify that the function argument to map is called once per element in the structure. To test this, you could write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My data structure"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"map calls the passed in function once per argument"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> double = x =&gt; x <span class="hljs-operator">*</span> <span class="hljs-number">2</span>;
    <span class="hljs-comment">/*there are constructors for up to 7 args */</span>
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(double);

    <span class="hljs-keyword">let</span> myStructure =
      <span class="hljs-module-identifier">MyStructure</span>.empty <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">1</span>) <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">2</span>);

    <span class="hljs-keyword">let</span> _ = <span class="hljs-module-identifier">MyStructure</span>.map(<span class="hljs-module-identifier">Mock</span>.fn(mock), myStructure);

    expect.mock(mock).toBeCalledTimes(<span class="hljs-number">2</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-tobecalledwith-equals-args-args-bool-args"></a><a href="#expectmockmock-tobecalledwith-equals-args-args-bool-args" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).toBeCalledWith(~equals: ('args, 'args) =&gt; bool=?, 'args)</code></h3>
<p>Use <code>expect.mock(mock).toBeCalledWith(~equals=?, args)</code> to ensure that a mock function got called with particular arguments.</p>
<p>For example suppose that you are implementing <code>map</code> for some data structure and want to verify that for a data structure with one element, the function passed to map is called with the value of that element.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My data structure"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"map actually uses the passed in function"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> double = x =&gt; x <span class="hljs-operator">*</span> <span class="hljs-number">2</span>;
    <span class="hljs-comment">/*there are constructors for up to 7 args */</span>
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(double);

    <span class="hljs-keyword">let</span> myStructure =
      <span class="hljs-module-identifier">MyStructure</span>.empty <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">1</span>);

    <span class="hljs-keyword">let</span> _ = <span class="hljs-module-identifier">MyStructure</span>.map(<span class="hljs-module-identifier">Mock</span>.fn(mock), myStructure);

    expect.mock(mock).toBeCalledWith(<span class="hljs-number">1</span>);
  });
});
</code></pre>
<p>For dealing with floats or other situations in which custom equality is required, a custom equals function can be provided:</p>
<pre><code class="hljs css language-reason">describe(<span class="hljs-string">"My data structure"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"map actually uses the passed in function"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> equals = (f1, f2) =&gt; abs_float(f1 <span class="hljs-operator">-.</span> f2) &lt; <span class="hljs-number">0.1</span>;
    <span class="hljs-keyword">let</span> double = x =&gt; x <span class="hljs-operator">*.</span> <span class="hljs-number">2.</span>;

    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(double);

    <span class="hljs-keyword">let</span> myStructure =
      <span class="hljs-module-identifier">MyStructure</span>.empty <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">1.</span>);

    <span class="hljs-keyword">let</span> _ = <span class="hljs-module-identifier">MyStructure</span>.map(<span class="hljs-module-identifier">Mock</span>.fn(mock), myStructure);

    expect.mock(mock).toBeCalledWith(~equals, <span class="hljs-number">1.</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-tothrow"></a><a href="#expectmockmock-tothrow" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).toThrow()</code></h3>
<p>Use <code>expect.mock(mock).toThrow()</code> to ensure that the implementation of a mock function has thrown during at least one of its invocations.</p>
<p>For example, if we want to test that our program can successfully handle a callback that raises an error, we could write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

<span class="hljs-keyword">exception</span> <span class="hljs-constructor">MyException</span>;

describe(<span class="hljs-string">"my program"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should gracefully handle an error raised by a callback"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(_ =&gt; <span class="hljs-keyword">raise</span>(<span class="hljs-constructor">MyException</span>));
    <span class="hljs-comment">/* ensure that our program runs without throwing an exception */</span>
    expect.fn(() =&gt; <span class="hljs-module-identifier">MyProgram</span>.run(<span class="hljs-module-identifier">Mock</span>.fn(mock)).not.toThrow();
    <span class="hljs-comment">/* ensure that our callback was called and did throw an exception*/</span>
    expect.mock(mock).toThrow();
  });
});

</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-tothrowexceptionexn"></a><a href="#expectmockmock-tothrowexceptionexn" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).toThrowException(exn)</code></h3>
<p>Use <code>expect.mock(mock).toThrowException(exn)</code> to ensure that the implementation of a mock function has thrown a particular exception during at least one of its invocations.</p>
<p>For example, suppose we have a shipping logistics application that accepts a shipping strategy of type <code>(weight, location) =&gt; unit</code> and we want to verify that our <code>byCarrierPigeon</code> strategy throws a <code>TooHeavy</code> exception when asked to ship a grand piano.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My Shipping app"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"can't ship a grand piano by carrier pigeon"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock2(<span class="hljs-module-identifier">ShippingStrategies</span>.byCarrierPigeon);

    <span class="hljs-module-identifier">MyShippingApp</span>.ship(<span class="hljs-module-identifier">Items</span>.grandPiano, <span class="hljs-module-identifier">Mock</span>.fn(mock));

    expect.mock(mock).toThrowException(<span class="hljs-constructor">TooHeavy</span>);
  });
});
</code></pre>
<blockquote>
<p>Note that there is no expect.mock(mock).not.toThrowException(exn). It is encouraged to use expect.mock(mock).not.toThrow() rather than asserting that a particular exception was not thrown.</p>
</blockquote>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-toreturntimesint"></a><a href="#expectmockmock-toreturntimesint" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).toReturnTimes(int)</code></h3>
<p>Use <code>expect.mock(mock).toReturnTimes(numTimes)</code> to ensure that a mock function returned successfully (i.e. did not throw an error) an exact number of times. Any calls to the mock function that throw an exception are not counted toward the number of times the function returned.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.mock.toReturnTimes"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Mock returns twice"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(_ =&gt; ());

    <span class="hljs-keyword">let</span> mockFunction = <span class="hljs-module-identifier">Mock</span>.fn(mock);

    <span class="hljs-keyword">let</span> _ = mockFunction();
    <span class="hljs-keyword">let</span> _ = mockFunction();

    expect.mock(mock).toReturnTimes(<span class="hljs-number">2</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectmockmock-toreturnwith-equals-ret-ret-bool-ret"></a><a href="#expectmockmock-toreturnwith-equals-ret-ret-bool-ret" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.mock(mock).toReturnWith(~equals: ('ret, 'ret) =&gt; bool=?, 'ret)</code></h3>
<p>Use <code>expect.mock(mock).toReturnWith(~equals=?, expected)</code> to ensure that a mock function has returned at least once with a specific value.</p>
<p>For example suppose that you are implementing <code>map</code> for some data structure and want to verify that when passing the function <code>double</code> to <code>map</code> on a structure containing <code>1</code>, <code>2</code> will be returned.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My data structure"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"map actually uses the passed in function"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> double = x =&gt; x <span class="hljs-operator">*</span> <span class="hljs-number">2</span>;
    <span class="hljs-comment">/*there are constructors for up to 7 args */</span>
    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(double);

    <span class="hljs-keyword">let</span> myStructure = <span class="hljs-module-identifier">MyStructure</span>.empty <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">1</span>);

    <span class="hljs-keyword">let</span> _ = <span class="hljs-module-identifier">MyStructure</span>.map(<span class="hljs-module-identifier">Mock</span>.fn(mock), myStructure);

    expect.mock(mock).toReturnWith(<span class="hljs-number">2</span>);
  });
});
</code></pre>
<p>For dealing with floats or other situations in which custom equality is required, a custom equals function can be provided:</p>
<pre><code class="hljs css language-reason">describe(<span class="hljs-string">"My data structure"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"map actually uses the passed in function"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> equals = (f1, f2) =&gt; abs_float(f1 <span class="hljs-operator">-.</span> f2) &lt; <span class="hljs-number">0.1</span>;
    <span class="hljs-keyword">let</span> double = x =&gt; x <span class="hljs-operator">*.</span> <span class="hljs-number">2.</span>;

    <span class="hljs-keyword">let</span> mock = <span class="hljs-module-identifier">Mock</span>.mock1(double);

    <span class="hljs-keyword">let</span> myStructure =
      <span class="hljs-module-identifier">MyStructure</span>.empty <span class="hljs-operator">|&gt;</span> <span class="hljs-module-identifier">MyStructure</span>.add(<span class="hljs-number">1.</span>);

    <span class="hljs-keyword">let</span> _ = <span class="hljs-module-identifier">MyStructure</span>.map(<span class="hljs-module-identifier">Mock</span>.fn(mock), myStructure);

    expect.mock(mock).toReturnWith(~equals, <span class="hljs-number">2.</span>);
  });
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="expectoption"></a><a href="#expectoption" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.option</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> equalsFn('a) = ('a, 'a) =&gt; bool;

<span class="hljs-keyword">type</span> optionMatchers('a) = {
  toBeNone: unit =&gt; unit,
  toBeSome: unit =&gt; unit,
  toBe: (~equals: equalsFn('a)=?, option('a)) =&gt; unit,
};

<span class="hljs-keyword">type</span> optionMatchersWithNot('a) = {
  not: optionMatchers('a),
  toBeNone: unit =&gt; unit,
  toBeSome: unit =&gt; unit,
  toBe: (~equals: equalsFn('a)=?, option('a)) =&gt; unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  option: 'a. option('a) =&gt; optionMatchersWithNot('a),
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectoption-a-tobe-equals-a-a-bool-option-a"></a><a href="#expectoption-a-tobe-equals-a-a-bool-option-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.option('a).toBe(~equals: ('a, 'a) =&gt; bool=?, option('a))</code></h3>
<p>Use <code>expect.option(actual).toBe(~equals=?, expected)</code> to test the value of an option.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.option.toBe"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Deep thought should compute the ultimate answer"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> answer = <span class="hljs-module-identifier">DeepThought</span>.answerUltimateQuestion();

    expect.option(answer).toBe(<span class="hljs-constructor">Some</span>(<span class="hljs-number">42</span>));
  });

  test(<span class="hljs-string">"Custom equality"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> equals = (f1, f2) =&gt; f1 <span class="hljs-operator">-.</span> f2 &lt; <span class="hljs-number">0.001</span>;
    expect.option(<span class="hljs-constructor">Some</span>(<span class="hljs-number">1.</span>)).toBe(~equals, <span class="hljs-constructor">Some</span>(<span class="hljs-number">1.000001</span>));
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectoptionoption-a-tobenone"></a><a href="#expectoptionoption-a-tobenone" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.option(option('a)).toBeNone()</code></h3>
<p>Use <code>expect.option(actual).toBeNone()</code> to test that the value of an option is equal to <code>None</code>;</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.option.toBeNone"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"shouldn't be anything better than bacon for breakfast"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> result = <span class="hljs-module-identifier">BreakfastFoodRanker</span>.findSuperiorOptionTo(<span class="hljs-string">"bacon"</span>);

    expect.option(result).toBeNone();
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectoptionoption-a-tobesome"></a><a href="#expectoptionoption-a-tobesome" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.option(option('a)).toBeSome()</code></h3>
<p>Use <code>expect.option(actual).toBeSome()</code> to test that the value of an option is not equal to <code>None</code>. This is equivalent to <code>expect.option(actual).not.toBeNone()</code>.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.option.toBeNone"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should be something better than octopus for breakfast"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> result = <span class="hljs-module-identifier">BreakfastFoodRanker</span>.findSuperiorOptionTo(<span class="hljs-string">"octopus"</span>);

    expect.option(result).toBeSome();
  });
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="expectresult"></a><a href="#expectresult" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.result</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> equalsFn('a) = ('a, 'a) =&gt; bool;

<span class="hljs-keyword">type</span> resultMatchers('a, 'b) = {
  toBeOk: unit =&gt; unit,
  toBeError: unit =&gt; unit,
  toBe:
    (
      ~equalsOk: equalsFn('a)=?,
      ~equalsError: equalsFn('b)=?,
      result('a, 'b)
    ) =&gt;
    unit,
};

<span class="hljs-keyword">type</span> resultMatchersWithNot('a, 'b) = {
  not: resultMatchers('a, 'b),
  toBeOk: unit =&gt; unit,
  toBeError: unit =&gt; unit,
  toBe:
    (
      ~equalsOk: equalsFn('a)=?,
      ~equalsError: equalsFn('b)=?,
      result('a, 'b)
    ) =&gt;
    unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  result: 'a 'b. result('a, 'b) =&gt; resultMatchersWithNot('a, 'b),
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectresultresult-a-tobe-equalsok-a-a-bool-equalserror-b-b-bool-result-a"></a><a href="#expectresultresult-a-tobe-equalsok-a-a-bool-equalserror-b-b-bool-result-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.result(result('a)).toBe(~equalsOk: ('a, 'a) =&gt; bool=?, ~equalsError: ('b, 'b) =&gt; bool =?, result('a))</code></h3>
<p>Use <code>expect.result(actual).toBe(~equalsOk=?, ~equalsError=?, expected)</code> to test the value of a result. The optional <code>~equalsOk</code> and <code>~equalsError</code>can be used when comparing values for which the default <code>==</code>is insufficient, such as with floats.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.result.toBe"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Deep thought should compute the ultimate answer"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> answer = <span class="hljs-module-identifier">DeepThought</span>.answerUltimateQuestion();

    expect.option(answer).toBe(<span class="hljs-constructor">Ok</span>(<span class="hljs-number">42</span>));
  });

  test(<span class="hljs-string">"Custom equality"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> equals = (f1, f2) =&gt; f1 <span class="hljs-operator">-.</span> f2 &lt; <span class="hljs-number">0.001</span>;
    expect.option(<span class="hljs-constructor">Some</span>(<span class="hljs-number">1.</span>)).toBe(~equalsOk=equals, <span class="hljs-constructor">Some</span>(<span class="hljs-number">1.000001</span>));
    expect.option(<span class="hljs-constructor">Error</span>(<span class="hljs-number">1.</span>)).toBe(~equalsError=equals, <span class="hljs-constructor">Error</span>(<span class="hljs-number">1.000001</span>));
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectresultresult-a-tobeok"></a><a href="#expectresultresult-a-tobeok" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.result(result('a)).toBeOk()</code></h3>
<p>Use <code>expect.option(actual).toBeNone()</code> to test that the value of a result matches the <code>Ok</code> constructor.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.option.toBeOk"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Car should be able to find directions to Disney World"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> result = <span class="hljs-module-identifier">Car</span>.navigate(<span class="hljs-string">"Disney World"</span>);

    expect.option(result).toBeOk();
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectresultresult-a-tobeerror"></a><a href="#expectresultresult-a-tobeerror" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.result(result('a)).toBeError()</code></h3>
<p>Use <code>expect.option(actual).toBeNone()</code> to test that the value of a result matches the <code>Error</code> constructor.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.option.toBeError"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Car should not be able to find directions to the moon"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> result = <span class="hljs-module-identifier">Car</span>.navigate(<span class="hljs-string">"the moon"</span>);

    expect.option(result).toBeError();
  });
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="expectsame"></a><a href="#expectsame" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.same</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  same: 'a. ('a, 'a) =&gt; unit,
  notSame: 'a. ('a, 'a) =&gt; unit,
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectsame-a-a"></a><a href="#expectsame-a-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.same('a, 'a)</code></h3>
<p>Use <code>expect.same(expected, actual)</code> to check that two values are equal using <code>===</code>, a physical equality check.</p>
<h3><a class="anchor" aria-hidden="true" id="expectnotsame-a-a"></a><a href="#expectnotsame-a-a" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.notSame('a, 'a)</code></h3>
<p>Use <code>expect.notSame(expected, actual)</code> to check that two values are not equal using <code>===</code>, a physical equality check.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

<span class="hljs-keyword">type</span> person = {
  name: string,
  age: int,
};

describe(<span class="hljs-string">"expect.notSame"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"two different people with the same name and age should not be the same"</span>, ({expect}) =&gt; {
    expect.notSame(
      {name: <span class="hljs-string">"Alan Turing"</span>, age: <span class="hljs-number">41</span>},
      {name: <span class="hljs-string">"Alan Turing"</span>, age: <span class="hljs-number">41</span>},
    );
  });
});
</code></pre>
<h2><a class="anchor" aria-hidden="true" id="expectstring"></a><a href="#expectstring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.string</code></h2>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">type</span> stringMatchers = {
  toBeEmpty: unit =&gt; unit,
  toEqual: string =&gt; unit,
  toEqualFile: string =&gt; unit,
  toEqualLines: list(string) =&gt; unit,
  toMatch: string =&gt; unit,
};
<span class="hljs-keyword">type</span> stringMatchersWithNot = {
  not: stringMatchers,
  toBeEmpty: unit =&gt; unit,
  toEqual: string =&gt; unit,
  toEqualFile: string =&gt; unit,
  toEqualLines: list(string) =&gt; unit,
  toMatch: string =&gt; unit,
  toMatchSnapshot: unit =&gt; unit,
};

<span class="hljs-keyword">let</span> expect: {
  <span class="hljs-operator">...</span>
  string: string =&gt; stringMatchersWithNot,
  <span class="hljs-operator">...</span>
};
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectstringstring-tobeempty"></a><a href="#expectstringstring-tobeempty" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.string(string).toBeEmpty()</code></h3>
<p>Use <code>expect.string(actual).toBeEmpty()</code> to check that a string is empty.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"expect.string.toBeEmpty"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"empty string should be empty"</span>, ({expect}) =&gt; {
    expect.string(<span class="hljs-string">""</span>).toBeEmpty();
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectstringstring-toequalstring"></a><a href="#expectstringstring-toequalstring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.string(string).toEqual(string)</code></h3>
<p>Use <code>expect.string(actual).toEqual(expected)</code> to test that a string is equal to a particular value.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Greeter"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"greeting should be Hello World!"</span>, ({expect}) =&gt; {
    expect.string(<span class="hljs-module-identifier">Greeter</span>.greeting).toEqual(<span class="hljs-string">"Hello World!"</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectstringstring-toequalfilestring"></a><a href="#expectstringstring-toequalfilestring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.string(string).toEqualFile(string)</code></h3>
<p>Use <code>expect.string(actual).toEqualFile(filename)</code> to check that a string is equal to the contents of a file.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Spaceballs"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"Password should be 12345"</span>, ({expect}) =&gt; {
    expect.string(<span class="hljs-string">"12345"</span>).toEqualFile(<span class="hljs-string">"DefenseShield/password.txt"</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectstringstring-toequallinesliststring"></a><a href="#expectstringstring-toequallinesliststring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.string(string).toEqualLines(list(string))</code></h3>
<p>Use <code>expect.string(actual).toEqualLines(expected)</code> to check that a string is equal to a list of strings joined by a new line.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"Deep Thought"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should write poetry"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> expected = <span class="hljs-literal">[</span>
      <span class="hljs-string">"Roses are red"</span>,
      <span class="hljs-string">"Violets are blue"</span>,
      <span class="hljs-string">"Rely is great"</span>,
      <span class="hljs-string">"Not false is true"</span>,
    <span class="hljs-literal">]</span>;

    <span class="hljs-keyword">let</span> actual = <span class="hljs-module-identifier">DeepThought</span>.writeSomePoetry();

    expect.string(actual).toEqualLines(expected);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectstringstring-tomatchstring"></a><a href="#expectstringstring-tomatchstring" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.string(string).toMatch(string)</code></h3>
<p>Use <code>expect.string(actual).toMatch(regex)</code> to verify that a string matches a PCRE regex.</p>
<p>For example if we want to verify that the a recipe generator module generates a recipe that contains either <code>bacon</code> or <code>sausage</code> I could write:</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My recipe"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"should contain a cured pork product"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> recipe = <span class="hljs-module-identifier">RecipeGenerator</span>.makeRecipe();

    expect.string(recipe).toMatch(<span class="hljs-string">"(bacon|sausage)"</span>);
  });
});
</code></pre>
<h3><a class="anchor" aria-hidden="true" id="expectstringstring-tomatchsnapshot"></a><a href="#expectstringstring-tomatchsnapshot" aria-hidden="true" class="hash-link"><svg class="hash-link-icon" aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a><code>expect.string(string).toMatchSnapshot()</code></h3>
<p>This ensures that the string matches the most recent snapshot. To generate a new snapshot or update an old one you can run Rely via the command line and pass the <code>-u</code> flag.</p>
<pre><code class="hljs css language-reason"><span class="hljs-keyword">open</span> <span class="hljs-module-identifier">TestFramework</span>;

describe(<span class="hljs-string">"My config generator"</span>, ({test}) =&gt; {
  test(<span class="hljs-string">"generate default config"</span>, ({expect}) =&gt; {
    <span class="hljs-keyword">let</span> actual = <span class="hljs-module-identifier">ConfigGenerator</span>.generateDefaultConfig();
    expect.string(actual).toMatchSnapshot();
  });
});
</code></pre>
<blockquote>
<p>Note that there is no <code>.not.toMatchSnapshot</code> matcher.</p>
</blockquote>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="/docs/rely/api"><span class="arrow-prev">← </span><span>Basic API</span></a><a class="docs-next button" href="/docs/rely/advanced"><span>Advanced</span><span class="arrow-next"> →</span></a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#expectarray"><code>expect.array</code></a><ul class="toc-headings"><li><a href="#expectarrayarray-a-tobeempty"><code>expect.array(array('a)).toBeEmpty()</code></a></li><li><a href="#expectarrayarray-a-tocontain-a"><code>expect.array(array('a)).toContain('a)</code></a></li><li><a href="#expectarrayarray-a-tocontainequal-equals-a-a-bool-a"><code>expect.array(array('a)).toContainEqual(~equals:('a, 'a) =&gt; bool=?, 'a)</code></a></li><li><a href="#expectarrayarray-a-toequal-equals-a-a-bool-array-a"><code>expect.array(array('a)).toEqual(~equals:('a, 'a) =&gt; bool, array('a))</code></a></li></ul></li><li><a href="#expectassertions-as-of-rely-310"><code>expect.assertions</code> (as of Rely 3.1.0)</a><ul class="toc-headings"><li><a href="#expectassertionsint"><code>expect.assertions(int)</code></a></li><li><a href="#expecthasassertions"><code>expect.hasAssertions()</code></a></li></ul></li><li><a href="#expectbool"><code>expect.bool</code></a><ul class="toc-headings"><li><a href="#expectboolbool-tobebool"><code>expect.bool(bool).toBe(bool)</code></a></li><li><a href="#expectboolbool-tobetrue"><code>expect.bool(bool).toBeTrue()</code></a></li><li><a href="#expectboolbool-tobefalse"><code>expect.bool(bool).toBeFalse()</code></a></li></ul></li><li><a href="#expectequal"><code>expect.equal</code></a><ul class="toc-headings"><li><a href="#expectequal-equals-a-a-bool-a-a"><code>expect.equal(~equals: ('a, 'a) =&gt; bool=?, 'a, 'a)</code></a></li></ul></li><li><a href="#expectext"><code>expect.ext</code></a><ul class="toc-headings"><li><a href="#expectext-1"><code>expect.ext</code></a></li></ul></li><li><a href="#expectfile"><code>expect.file</code></a><ul class="toc-headings"><li><a href="#expectfilestring-tobeempty"><code>expect.file(string).toBeEmpty()</code></a></li><li><a href="#expectfilestring-toequalstring"><code>expect.file(string).toEqual(string)</code></a></li><li><a href="#expectfilestring-toequalfilestring"><code>expect.file(string).toEqualFile(string)</code></a></li><li><a href="#expectfilestring-toequallinesliststring"><code>expect.file(string).toEqualLines(list(string))</code></a></li><li><a href="#expectfilestring-tomatchstring"><code>expect.file(string).toMatch(string)</code></a></li><li><a href="#expectfilestring-tomatchsnapshot"><code>expect.file(string).toMatchSnapshot()</code></a></li></ul></li><li><a href="#expectfloat"><code>expect.float</code></a><ul class="toc-headings"><li><a href="#expectfloatfloat-tobecloseto-digits-int-float"><code>expect.float(float).toBeCloseTo(~digits: int=?, float)</code></a></li></ul></li><li><a href="#expectfn"><code>expect.fn</code></a><ul class="toc-headings"><li><a href="#expectfnunit-a-tothrow"><code>expect.fn(unit =&gt; 'a).toThrow()</code></a></li><li><a href="#expectfnunit-a-tothrowexceptionexn"><code>expect.fn(unit =&gt; 'a).toThrowException(exn)</code></a></li></ul></li><li><a href="#expectint"><code>expect.int</code></a><ul class="toc-headings"><li><a href="#expectintint-tobeint"><code>expect.int(int).toBe(int)</code></a></li></ul></li><li><a href="#expectlines"><code>expect.lines</code></a><ul class="toc-headings"><li><a href="#expectlinesliststring-tobeempty"><code>expect.lines(list(string)).toBeEmpty()</code></a></li><li><a href="#expectlinesliststring-toequalstring"><code>expect.lines(list(string)).toEqual(string)</code></a></li><li><a href="#expectlinesliststring-toequalfilestring"><code>expect.lines(list(string)).toEqualFile(string)</code></a></li><li><a href="#expectlinesliststring-toequallinesliststring"><code>expect.lines(list(string)).toEqualLines(list(string))</code></a></li><li><a href="#expectlinesliststring-tomatchstring"><code>expect.lines(list(string)).toMatch(string)</code></a></li><li><a href="#expectlinesliststring-tomatchsnapshot"><code>expect.lines(list(string)).toMatchSnapshot()</code></a></li></ul></li><li><a href="#expectlist"><code>expect.list</code></a><ul class="toc-headings"><li><a href="#expectlistlist-a-tobeempty"><code>expect.list(list('a)).toBeEmpty()</code></a></li><li><a href="#expectlistlist-a-tocontain-a"><code>expect.list(list('a)).toContain('a)</code></a></li><li><a href="#expectlistlist-a-tocontainequal-equals-a-a-bool-a"><code>expect.list(list('a)).toContainEqual(~equals:('a, 'a) =&gt; bool=?, 'a)</code></a></li><li><a href="#expectlistactual-toequal-equals-expected"><code>expect.list(actual).toEqual(~equals, expected)</code></a></li></ul></li><li><a href="#expectmock"><code>expect.mock</code></a><ul class="toc-headings"><li><a href="#expectmockmock-lastcalledwith-args"><code>expect.mock(mock).lastCalledWith('args)</code></a></li><li><a href="#expectmockmock-lastreturnedwith-ret"><code>expect.mock(mock).lastReturnedWith('ret)</code></a></li><li><a href="#expectmockmock-nthcalledwith-equals-args-args-bool-int-args"><code>expect.mock(mock).nthCalledWith(~equals:('args, 'args) =&gt; bool=?, int, 'args)</code></a></li><li><a href="#expectmockmock-nthreturnedwith-equals-ret-ret-bool-int-args"><code>expect.mock(mock).nthReturnedWith(~equals:('ret, 'ret) =&gt; bool=?, int, 'args)</code></a></li><li><a href="#expectmockmock-tobecalled"><code>expect.mock(mock).toBeCalled()</code></a></li><li><a href="#expectmockmock-tobecalledtimesint"><code>expect.mock(mock).toBeCalledTimes(int)</code></a></li><li><a href="#expectmockmock-tobecalledwith-equals-args-args-bool-args"><code>expect.mock(mock).toBeCalledWith(~equals: ('args, 'args) =&gt; bool=?, 'args)</code></a></li><li><a href="#expectmockmock-tothrow"><code>expect.mock(mock).toThrow()</code></a></li><li><a href="#expectmockmock-tothrowexceptionexn"><code>expect.mock(mock).toThrowException(exn)</code></a></li><li><a href="#expectmockmock-toreturntimesint"><code>expect.mock(mock).toReturnTimes(int)</code></a></li><li><a href="#expectmockmock-toreturnwith-equals-ret-ret-bool-ret"><code>expect.mock(mock).toReturnWith(~equals: ('ret, 'ret) =&gt; bool=?, 'ret)</code></a></li></ul></li><li><a href="#expectoption"><code>expect.option</code></a><ul class="toc-headings"><li><a href="#expectoption-a-tobe-equals-a-a-bool-option-a"><code>expect.option('a).toBe(~equals: ('a, 'a) =&gt; bool=?, option('a))</code></a></li><li><a href="#expectoptionoption-a-tobenone"><code>expect.option(option('a)).toBeNone()</code></a></li><li><a href="#expectoptionoption-a-tobesome"><code>expect.option(option('a)).toBeSome()</code></a></li></ul></li><li><a href="#expectresult"><code>expect.result</code></a><ul class="toc-headings"><li><a href="#expectresultresult-a-tobe-equalsok-a-a-bool-equalserror-b-b-bool-result-a"><code>expect.result(result('a)).toBe(~equalsOk: ('a, 'a) =&gt; bool=?, ~equalsError: ('b, 'b) =&gt; bool =?, result('a))</code></a></li><li><a href="#expectresultresult-a-tobeok"><code>expect.result(result('a)).toBeOk()</code></a></li><li><a href="#expectresultresult-a-tobeerror"><code>expect.result(result('a)).toBeError()</code></a></li></ul></li><li><a href="#expectsame"><code>expect.same</code></a><ul class="toc-headings"><li><a href="#expectsame-a-a"><code>expect.same('a, 'a)</code></a></li><li><a href="#expectnotsame-a-a"><code>expect.notSame('a, 'a)</code></a></li></ul></li><li><a href="#expectstring"><code>expect.string</code></a><ul class="toc-headings"><li><a href="#expectstringstring-tobeempty"><code>expect.string(string).toBeEmpty()</code></a></li><li><a href="#expectstringstring-toequalstring"><code>expect.string(string).toEqual(string)</code></a></li><li><a href="#expectstringstring-toequalfilestring"><code>expect.string(string).toEqualFile(string)</code></a></li><li><a href="#expectstringstring-toequallinesliststring"><code>expect.string(string).toEqualLines(list(string))</code></a></li><li><a href="#expectstringstring-tomatchstring"><code>expect.string(string).toMatch(string)</code></a></li><li><a href="#expectstringstring-tomatchsnapshot"><code>expect.string(string).toMatchSnapshot()</code></a></li></ul></li></ul></nav></div><footer class="nav-footer" id="footer"><section class="sitemap"><a href="/" class="nav-home"><img src="/img/logo-inverted.svg" alt="Reason Native" width="66" height="58"/></a><div><h5>Projects</h5><a href="/docs/rely">Rely</a><a href="/docs/console">Console</a><a href="/docs/pastel">Pastel</a><a href="/docs/refmterr">Refmterr</a><a href="/docs/file-context-printer">File Context Printer</a></div><div><h5>More</h5><a href="https://github.com/facebookexperimental/reason-native">GitHub</a><a class="github-button" href="https://github.com/facebookexperimental/reason-native" data-icon="octicon-star" data-count-href="/facebook/docusaurus/stargazers" data-show-count="true" data-count-aria-label="# stargazers on GitHub" aria-label="Star this project on GitHub">Star</a></div></section><a href="https://code.facebook.com/projects/" target="_blank" rel="noreferrer noopener" class="fbOpenSource"><img src="/img/oss_logo.png" alt="Facebook Open Source" width="170" height="45"/></a><section class="copyright">Copyright © 2021 Facebook Inc.</section></footer></div></body></html>